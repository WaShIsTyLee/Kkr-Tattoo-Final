<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KKR.TATTOO</title>
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLMDJ8uR4pYw7h0FfN/kC6y8D80D8oG5v1T28j9z/kC5/S1G8x1/r21w2B0Q5B5Q=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>

    <nav class="main-nav">
        <div class="nav-logo">
            <a href="#">
                <img src="/Imagenes/Header_background/titulo.png" alt="KKR Tattoo Logo" class="logo-img">
            </a>
        </div>
        <button class="menu-toggle" aria-label="Toggle navigation" id="menuToggle">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </button>
        <ul class="nav-links" id="navLinks">
            <li><a href="#artista">Artista</a></li>
            <li><a href="#piezas">Piezas</a></li>
            <li><a href="#sponsors">Sponsors</a></li>
            <li><a href="#estudio">Estudio</a></li>
            <li><a href="#contacto">Contacto</a></li>
        </ul>
    </nav>

    <section class="marble_header">
        <div class="header-content">
            <h1>Especialista en Realismo y Surrealismo</h1>
        </div>
        <ul class="social header-social-list">
            <li data-tooltip="Instagram"
                style="--bg: linear-gradient(-45deg, #feda75, #fa7e1e, #d62976, #962fbf, #4f5bd5)">
                <a href="https://www.instagram.com/kkr.tattoo/" aria-label="Instagram">
                    <i class="fab fa-instagram"></i>
                </a>
            </li>
            <li data-tooltip="Facebook" style="--bg: #1877F2">
                <a href="https://www.facebook.com/Juangutierrez.kkr13/?locale=es_ES" aria-label="Facebook">
                    <i class="fab fa-facebook-f"></i>
                </a>
            </li>
            <li data-tooltip="TikTok" style="--bg: #000000">
                <a href="https://www.tiktok.com/@kkrtattoo" aria-label="TikTok">
                    <i class="fab fa-tiktok"></i>
                </a>
            </li>
        </ul>
    </section>

    <div class="content-background">

        <section id="artista" class="artista">
            <p class="artista-titulo">ARTISTA</p>
            <div class="artista-contenido">
                <div class="artista-info-izquierda">
                    <img src="Imagenes/Perfil/Juan.jpg" alt="Foto de Juan Gutierrez">
                    <p class="artista-nombre">Juan Gutierrez</p>
                </div>
                <div class="artista-historia-card">
                    <h3>K.K.R. TATTOO</h3>
                    <p style="text-align: justify;">
                        Especialista en realismo con estética escultórica desde 2015. Reconocido por transformar ideas
                        en
                        composiciones únicas con efecto piedra, Juan fusiona realismo y arte clásico para crear piezas
                        con un estilo inconfundible. Cada proyecto se desarrolla junto al cliente, interpretando su
                        historia y dándole un enfoque artístico que convierte el tatuaje en una obra con intención y
                        personalidad propia. Su estilo, influenciado por maestros del Renacimiento como Miguel Ángel y
                        Leonardo da Vinci, se ha consolidado como una propuesta exclusiva dentro del sector, ofreciendo
                        diseños de alto impacto visual, gran detalle y un acabado elegante que destaca en la piel. Si
                        buscas un tatuaje con carácter, significado y un enfoque artístico único. <br>
                        K.K.R. es la elección
                        perfecta para tu próximo proyecto.</p>
                </div>
            </div>
        </section>

        <section id="piezas" class="seccion-piezas">
            <p class="piezas-titulo">PIEZAS</p>

            <div class="filtro-botones">
                <button class="filtro-btn active" data-filter="all">Todos</button>
                <button class="filtro-btn" data-filter="realismo">Realismo</button>
                <button class="filtro-btn" data-filter="surrealismo">Surrealismo</button>
                <button class="filtro-btn" data-filter="retrato">Retrato</button>
                <button class="filtro-btn" data-filter="animales">Animales</button>
            </div>

            <div class="galeria-piezas">

                <!-- HECHO !-->
                <div class="pieza-card" data-category="realismo"
                    data-images='["Imagenes/Tatuajes/Realismo/FiguraMitologicaFemenina.jpg", "Imagenes/Tatuajes/Realismo/FiguraMitologicaFemenina2.jpg"]'
                    data-video="Imagenes/Tatuajes/Realismo/FiguraMitologicaFemeninaVideo.mp4">
                    <img src="Imagenes/Tatuajes/Realismo/FiguraMitologicaFemenina.jpg" alt="Figura Mitologica Femenina">
                    <div class="card-caption">Figura Femenina Mitologica</div>
                </div>

                <!-- HECHO !-->
                <div class="pieza-card" data-category="animales"
                    data-images='["Imagenes/Tatuajes/Animales/Leon1.jpg", "Imagenes/Tatuajes/Animales/Leon2.jpg"]'
                    data-video="Imagenes/Tatuajes/Animales/VideoLeon.mp4">
                    <img src="Imagenes/Tatuajes/Animales/Leon1.jpg" alt="Animales 1">
                    <div class="card-caption">León</div>
                </div>

                <!-- HECHO !-->
                <div class="pieza-card" data-category="realismo"
                    data-images='["Imagenes/Tatuajes/Realismo/LuciferPortadorDeLaLuz.jpg", "Imagenes/Tatuajes/Realismo/LuciferPortadorDeLaLuz2.jpg"]'
                    data-video="Imagenes/Tatuajes/Realismo/LuciferPortadorDeLaLuzVideo.mp4">
                    <img src="Imagenes/Tatuajes/Realismo/LuciferPortadorDeLaLuz.jpg" alt="Figura Mitologica Femenina">
                    <div class="card-caption">Lucifer Portador de la Luz</div>
                </div>

                <!-- HECHO !-->
                <div class="pieza-card" data-category="realismo"
                    data-images='["Imagenes/Tatuajes/Realismo/FiguraMitologicaMasculina2.jpg", "Imagenes/Tatuajes/Realismo/FiguraMitologicaMasculina.jpg"]'
                    data-video="Imagenes/Tatuajes/Realismo/FiguraMitologicaMasculinaVideo.mp4">
                    <img src="Imagenes/Tatuajes/Realismo/FiguraMitologicaMasculina2.jpg" alt="Animales 1">
                    <div class="card-caption">Figura Masculina Mitologica</div>
                </div>

                <!-- HECHO !-->
                <div class="pieza-card" data-category="animales"
                    data-images='["Imagenes/Tatuajes/Animales/Pajaro1.jpg", "Imagenes/Tatuajes/Animales/Pajaro.jpg"]'
                    data-video="Imagenes/Tatuajes/Animales/PajaroVideo.mp4">
                    <img src="Imagenes/Tatuajes/Animales/Pajaro1.jpg" alt="Animales 1">
                    <div class="card-caption">Pajaro Sobre Nube</div>
                </div>

                <!-- HECHO !-->
                <div class="pieza-card" data-category="retrato"
                    data-images='["Imagenes/Tatuajes/Retrato/LilPep1.jpg", "Imagenes/Tatuajes/Retrato/LilPep.jpg"]'
                    data-video="Imagenes/Tatuajes/Retrato/LilPepVideo.mp4">
                    <img src="Imagenes/Tatuajes/Retrato/LilPep1.jpg" alt="Animales 1">
                    <div class="card-caption">Lil Pep</div>
                </div>

                <!-- HECHO !-->
                <div class="pieza-card" data-category="realismo"
                    data-images='["Imagenes/Tatuajes/Realismo/VeniVidiVice.jpg", "Imagenes/Tatuajes/Realismo/VeniVidiVice1.jpg", "Imagenes/Tatuajes/Realismo/VeniVidiVice2.jpg", "Imagenes/Tatuajes/Realismo/VeniVidiVice3.jpg"]'>
                    <img src="Imagenes/Tatuajes/Realismo/VeniVidiVice.jpg" alt="Veni Vidi Vici Tattoo">
                    <div class="card-caption">Veni Vidi Vici</div>
                </div>

                <!-- HECHO !-->
                <div class="pieza-card" data-category="surrealismo"
                    data-images='["Imagenes/Tatuajes/Surrealismo/Ragnarok.jpg", "Imagenes/Tatuajes/Surrealismo/Ragnarok1.jpg"]'
                    data-video="Imagenes/Tatuajes/Surrealismo/RagnarokVideo.mp4">
                    <img src="Imagenes/Tatuajes/Surrealismo/Ragnarok1.jpg" alt="Animales 1">
                    <div class="card-caption">Ragnarok</div>
                </div>

                <div class="pieza-card" data-category="surrealismo">
                    <img src="Imagenes/Tatuajes/Imagen_08_ejemplo.jpg" alt="Surrealismo Animal">
                    <div class="card-caption">Ojo con Águila</div>
                </div>

                <div class="pieza-card hidden-initial" data-category="retrato">
                    <img src="Imagenes/Tatuajes/Imagen_09_ejemplo.jpg" alt="Retrato 2">
                    <div class="card-caption">Retrato de Figura Clásica</div>
                </div>

                

                <div class="pieza-card hidden-initial" data-category="surrealismo">
                    <img src="Imagenes/Tatuajes/Imagen_11_ejemplo.jpg" alt="Surrealismo 2">
                    <div class="card-caption">Mano y Llama</div>
                </div>

                <div class="pieza-card hidden-initial" data-category="animales">
                    <img src="Imagenes/Tatuajes/Imagen_12_ejemplo.jpg" alt="Animales 3">
                    <div class="card-caption">Búho en Vuelo</div>
                </div>

                

                <div class="pieza-card hidden-initial" data-category="surrealismo">
                    <img src="Imagenes/Tatuajes/Imagen_14_ejemplo.jpg" alt="Surrealismo 3">
                    <div class="card-caption">Paisaje Onírico</div>
                </div>

                <div class="pieza-card hidden-initial" data-category="animales">
                    <img src="Imagenes/Tatuajes/Imagen_15_ejemplo.jpg" alt="Animales 4">
                    <div class="card-caption">Tigre y Humo</div>
                </div>

                <div class="pieza-card hidden-initial" data-category="retrato">
                    <img src="Imagenes/Tatuajes/Imagen_16_ejemplo.jpg" alt="Retrato 4">
                    <div class="card-caption">Retrato con Textura</div>
                </div>

            </div>
            <div class="ver-mas-container">
                <button id="mostrarMasBtn" class="primary-btn">Mostrar Más Piezas</button>
            </div>

        </section>

        <section id="sponsors" class="seccion-sponsors">
            <h2 class="sponsors-titulo">
                Nuestros Colaboradores
            </h2>
            <p class="sponsors-subtitulo">
                Trabajamos con las mejores marcas y talentos del sector para ofrecer siempre productos y experiencias de
                máxima calidad.
            </p>
            <div class="sponsors-container-interactivo">
                <div class="sponsor-interactivo-card">
                    <a href="https://www.instagram.com/tau_tau_supplies/" target="_blank" rel="noopener noreferrer">
                        <div class="sponsor-imagen tautau-ajuste"
                            style="background-image: url('Imagenes/Sponsors/tautau.png');">
                        </div>
                        <div class="sponsor-info">
                            <h3>@tau_tau_supplies</h3>
                            <p>Suministros de Tatuaje</p>
                            <i class="fab fa-instagram"></i>
                        </div>
                    </a>
                </div>
                <div class="sponsor-interactivo-card">
                    <a href="https://www.instagram.com/jarana.eu/" target="_blank" rel="noopener noreferrer">
                        <div class="sponsor-imagen jarana-ajuste"
                            style="background-image: url('Imagenes/Sponsors/jarana.png');">
                        </div>
                        <div class="sponsor-info">
                            <h3>@jarana</h3>
                            <p>Invitados & Equipos</p>
                            <i class="fab fa-instagram"></i>
                        </div>
                    </a>
                </div>
                <div class="sponsor-interactivo-card">
                    <a href="https://www.instagram.com/sunninkofficial/" target="_blank" rel="noopener noreferrer">
                        <div class="sponsor-imagen" style="background-image: url('Imagenes/Sponsors/sunnik.png');">
                        </div>
                        <div class="sponsor-info">
                            <h3>@sunninkofficial</h3>
                            <p>Productos Exclusivos para Tinta</p>
                            <i class="fab fa-instagram"></i>
                        </div>
                    </a>
                </div>
            </div>
        </section>

        <section id="estudio" class="mapa-horario">
            <h2 class="artista-titulo">El Estudio</h2>
            <div class="imagenestudio">
                <div class="horario">
                    <h3>Horario del Estudio</h3>
                    <ul>
                        <li><strong>Lunes:</strong> 9:00 - 14:00 y 16:00 - 21:00</li>
                        <li style="color: red;"><strong>Martes:</strong> Cerrado</li>
                        <li><strong>Miércoles:</strong> 9:00 - 14:00 y 16:00 - 21:00</li>
                        <li style="color: red;"><strong>Jueves:</strong> Cerrado</li>
                        <li><strong>Viernes:</strong> 9:00 - 14:00 y 16:00 - 21:00</li>
                        <li style="color: red;"><strong>Sábado:</strong> Cerrado</li>
                        <li style="color: red;"><strong>Domingo:</strong> Cerrado</li>
                    </ul>
                    <p><em>Las citas seran atendidas por Whatsapp</em></p>
                    <br>
                </div>
                <div class="mapa">
                    <h3> Ubicación </h3>
                    <p><strong>Dirección:</strong> Av. Juan Carlos I 53, 14520 Fernán-Núñez, Córdoba</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=Av.+Juan+Carlos+I+53,+14520+Fernán-Núñez,+Córdoba"
                        target="_blank" style="display: block; margin-top: 10px; color: #efb810;">
                        Ver en Google Maps
                    </a>
                    <div
                        style="border: 1px solid #ccc; height: auto; background-color: #f0f0f0; padding: 5px; border-radius: 10px;">
                        <iframe
                            src="https://maps.google.com/maps?q=Av.+Juan+Carlos+I+53,+14520+Fernán-Núñez,+Córdoba&t=&z=16&ie=UTF8&iwloc=&output=embed"
                            width="100%" height="300" style="border:0; border-radius: 8px;" allowfullscreen=""
                            loading="lazy" referrerpolicy="no-referrer-when-downgrade">
                        </iframe>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <footer id="contacto" class="main-footer">
        <div class="footer-col footer-about">
            <h3 class="footer-title">KKR.TATTOO</h3>
            <p>
                KKR.TATTOO es tu estudio de tatuajes en Fernán-Núñez, Córdoba.
                Especialistas en Blackwork y Realismo, con más de 8 años de experiencia.
                Nos dedicamos a transformar tus ideas en arte corporal único y duradero,
                garantizando calidad y profesionalidad.
            </p>
        </div>
        <div class="footer-col footer-contact">
            <h3 class="footer-title">Datos de Contacto</h3>
            <ul>
                <li><i class="fas fa-map-marker-alt"></i> Av. Juan Carlos I 53, 14520 Fernán-Núñez, Córdoba</li>
                <li><i class="fas fa-phone-alt"></i> <a href="tel:+34606732394">606 73 23 94</a></li>
            </ul>
        </div>
        <div class="footer-col footer-social">
            <h3 class="footer-title">Síguenos En</h3>
            <div class="social-icons">
                <a href="https://www.instagram.com/kkr.tattoo/" target="_blank" title="Instagram"><i
                        class="fab fa-instagram"></i></a>
                <a href="https://www.facebook.com/Juangutierrez.kkr13/?locale=es_ES" target="_blank" title="Facebook"><i
                        class="fab fa-facebook-f"></i></a>
                <a href="https://www.tiktok.com/@kkrtattoo" target="_blank" title="TikTok"><i
                        class="fab fa-tiktok"></i></a>
            </div>
            <div class="footer-brand">
                <p>KKR.TATTOO © 2025 <br> <a
                        href="https://www.linkedin.com/in/juan-j%C3%A9sus-l%C3%B3pez-solano-5b0133232/">Desarrollado por
                        Juan Jesús López Solano y Juan Gutierrez</a></p>
            </div>
        </div>
    </footer>

    <div id="modalGaleria" class="modal">
        <span class="cerrar" id="cerrarModal">&times;</span>
        <div class="modal-contenido-expandido">
            <div class="carousel-container">
                <div class="carousel-track">
                </div>
                <button class="carousel-prev" aria-label="Anterior">&#10094;</button>
                <button class="carousel-next" aria-label="Siguiente">&#10095;</button>
            </div>
            <div id="captionModal" class="modal-caption-expandido"></div>
        </div>
    </div>
    <div class="whatsapp-float">
        <a href="https://api.whatsapp.com/send?phone=34606732394" target="_blank" title="Escríbenos por WhatsApp">
            <i class="fab fa-whatsapp"></i>
            <span class="badge active">1</span>
        </a>
    </div>

    <script>
        const menuToggle = document.getElementById('menuToggle');
        const navLinks = document.getElementById('navLinks');
        const navBar = document.querySelector('.main-nav');
        const links = navLinks.querySelectorAll('a');

        function toggleMenu() {
            navLinks.classList.toggle('active');
            menuToggle.classList.toggle('active');
        }

        menuToggle.onclick = toggleMenu;

        links.forEach(link => {
            link.addEventListener('click', function (e) {
                const href = this.getAttribute('href');

                if (href.startsWith('#') && href.length > 1) {
                    e.preventDefault();

                    const targetElement = document.querySelector(href);

                    if (targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth'
                        });

                        if (navLinks.classList.contains('active')) {
                            toggleMenu();
                        }
                    }
                } else if (navLinks.classList.contains('active')) {
                    toggleMenu();
                }
            });
        });

        window.addEventListener('scroll', function () {
            if (window.scrollY > 50) {
                navBar.classList.add('scrolled');
            } else {
                navBar.classList.remove('scrolled');
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            // --- Variables de Galería y Modal ---
            const filterButtons = document.querySelectorAll('.filtro-btn');
            const galleryCards = document.querySelectorAll('.pieza-card');

            const modal = document.getElementById('modalGaleria');
            const cerrarModalBtn = document.getElementById('cerrarModal');
            const modalCaption = document.getElementById('captionModal');

            // Aseguramos que los selectores funcionen con la nueva estructura del modal
            const carouselTrack = modal.querySelector('.carousel-track');
            const carouselPrevBtn = modal.querySelector('.carousel-prev');
            const carouselNextBtn = modal.querySelector('.carousel-next');

            let currentSlide = 0;
            let carouselItems = []; // Para almacenar los elementos del carrusel (imágenes/videos)

            // --- Variables Mostrar Más/Menos ---
            const mostrarMasBtn = document.getElementById('mostrarMasBtn');
            const initialHiddenCards = Array.from(document.querySelectorAll('.pieza-card.hidden-initial'));
            const piezasSection = document.getElementById('piezas');
            let allShown = false;

            // --- Funciones de Carrusel ---
            function showSlide(index) {
                if (carouselItems.length === 0) return;

                // Asegurarse de que el índice esté dentro de los límites
                if (index < 0) {
                    currentSlide = carouselItems.length - 1;
                } else if (index >= carouselItems.length) {
                    currentSlide = 0;
                } else {
                    currentSlide = index;
                }

                const offset = -currentSlide * 100;
                carouselTrack.style.transform = `translateX(${offset}%)`;

                // Pausar todos los videos excepto el actual
                carouselItems.forEach((item, i) => {
                    const video = item.querySelector('video');
                    if (video) {
                        if (i === currentSlide) {
                            video.play();
                        } else {
                            video.pause();
                            video.currentTime = 0; // Reiniciar video al cambiar
                        }
                    }
                });
            }

            function nextSlide() {
                showSlide(currentSlide + 1);
            }

            function prevSlide() {
                showSlide(currentSlide - 1);
            }

            // --- Manejo del Botón Mostrar Más/Menos ---
            function toggleGallery() {
                if (!allShown) {
                    initialHiddenCards.forEach(card => {
                        card.classList.remove('hidden-initial');
                        card.style.display = 'block';
                        setTimeout(() => {
                            card.style.opacity = '1';
                        }, 10);
                    });

                    mostrarMasBtn.textContent = 'Mostrar Menos Piezas';
                    allShown = true;

                } else {
                    initialHiddenCards.forEach(card => {
                        card.classList.add('hidden-initial');
                        card.style.opacity = '0';
                        setTimeout(() => {
                            card.style.display = 'none';
                        }, 300);
                    });

                    mostrarMasBtn.textContent = 'Mostrar Más Piezas';
                    allShown = false;

                    if (piezasSection) {
                        piezasSection.scrollIntoView({
                            behavior: 'smooth'
                        });
                    }
                }
                const activeBtn = document.querySelector('.filtro-btn.active');
                filterPieces(activeBtn ? activeBtn.getAttribute('data-filter') : 'all');
            }
            mostrarMasBtn.addEventListener('click', toggleGallery);

            // --- Función de Filtrado ---
            function filterPieces(filter) {
                let activeFilter = filter;
                if (!activeFilter) {
                    const activeBtn = document.querySelector('.filtro-btn.active');
                    activeFilter = activeBtn ? activeBtn.getAttribute('data-filter') : 'all';
                }

                galleryCards.forEach(card => {
                    const categories = card.getAttribute('data-category');
                    const isInitiallyHidden = card.classList.contains('hidden-initial');

                    const matchesFilter = activeFilter === 'all' || categories === activeFilter;
                    const shouldShow = matchesFilter && (!isInitiallyHidden || allShown);

                    // Pequeño truco para asegurar que la animación se dispare correctamente
                    card.style.opacity = '1';

                    if (!shouldShow) {
                        card.style.opacity = '0';
                        setTimeout(() => {
                            card.style.display = 'none';
                        }, 300);

                    } else {
                        card.style.display = 'block';
                        setTimeout(() => {
                            card.style.opacity = '1';
                        }, 10);
                    }
                });

                if (activeFilter === 'all' && initialHiddenCards.length > 0) {
                    mostrarMasBtn.style.display = 'block';
                    mostrarMasBtn.textContent = allShown ? 'Mostrar Menos Piezas' : 'Mostrar Más Piezas';
                } else {
                    mostrarMasBtn.style.display = 'none';
                }
            }

            // --- Eventos de Filtro ---
            filterButtons.forEach(button => {
                button.addEventListener('click', function () {
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');

                    const filterValue = this.getAttribute('data-filter');
                    filterPieces(filterValue);
                });
            });

            // --- Lógica para Abrir el Modal Expandido ---
            galleryCards.forEach(card => {
                card.addEventListener('click', function () {
                    // Solo abrir si la tarjeta está visible
                    if (window.getComputedStyle(card).display !== 'none' && window.getComputedStyle(card).opacity !== '0') {
                        const caption = this.querySelector('.card-caption').innerText;
                        const imagesJSON = this.getAttribute('data-images');
                        const videoURL = this.getAttribute('data-video');

                        let images = [];
                        if (imagesJSON) {
                            try {
                                images = JSON.parse(imagesJSON);
                            } catch (e) {
                                console.error("Error al parsear data-images:", e);
                                images = [this.querySelector('img').src]; // Fallback
                            }
                        } else {
                            images = [this.querySelector('img').src]; // Si no hay data-images, usa la principal
                        }

                        // Limpiar el carrusel
                        carouselTrack.innerHTML = '';
                        carouselItems = [];

                        // Añadir imágenes al carrusel
                        images.forEach(imgSrc => {
                            const itemDiv = document.createElement('div');
                            itemDiv.classList.add('carousel-item');
                            const imgElement = document.createElement('img');
                            imgElement.src = imgSrc;
                            imgElement.alt = caption;
                            itemDiv.appendChild(imgElement);
                            carouselTrack.appendChild(itemDiv);
                            carouselItems.push(itemDiv);
                        });

                        // Añadir video al carrusel (si existe)
                        if (videoURL) {
                            const itemDiv = document.createElement('div');
                            itemDiv.classList.add('carousel-item');
                            const videoElement = document.createElement('video');
                            videoElement.src = videoURL;
                            videoElement.controls = true; // Mostrar controles de video
                            videoElement.loop = true; // Reproducir en bucle
                            videoElement.muted = true; // Silenciar por defecto
                            itemDiv.appendChild(videoElement);
                            carouselTrack.appendChild(itemDiv);
                            carouselItems.push(itemDiv);
                        }

                        modalCaption.innerHTML = caption;
                        modal.style.display = "block";
                        currentSlide = 0; // Reiniciar a la primera diapositiva
                        showSlide(currentSlide); // Mostrar la primera diapositiva

                        // Mostrar/Ocultar botones de navegación si solo hay un elemento
                        if (carouselItems.length <= 1) {
                            carouselPrevBtn.style.display = 'none';
                            carouselNextBtn.style.display = 'none';
                        } else {
                            carouselPrevBtn.style.display = 'block';
                            carouselNextBtn.style.display = 'block';
                        }
                    }
                });
            });

            // --- Eventos del Modal Expandido ---
            cerrarModalBtn.onclick = function () {
                modal.style.display = "none";
                // Pausar todos los videos al cerrar el modal
                carouselItems.forEach(item => {
                    const video = item.querySelector('video');
                    if (video) {
                        video.pause();
                        video.currentTime = 0;
                    }
                });
            }
            modal.onclick = function (event) {
                // Si se hace click fuera del contenido (en el fondo oscuro)
                if (event.target === modal) {
                    modal.style.display = "none";
                    // Pausar todos los videos al cerrar el modal
                    carouselItems.forEach(item => {
                        const video = item.querySelector('video');
                        if (video) {
                            video.pause();
                            video.currentTime = 0;
                        }
                    });
                }
            }

            carouselPrevBtn.addEventListener('click', prevSlide);
            carouselNextBtn.addEventListener('click', nextSlide);

            // --- Inicialización ---
            filterPieces('all'); // Mostrar todas las piezas al cargar

            // --- Lógica del Badge de WhatsApp ---
            const whatsappBadge = document.querySelector('.whatsapp-float .badge');
            function toggleBadgeVisibility() {
                if (whatsappBadge) {
                    whatsappBadge.classList.toggle('active');
                }
            }
            if (whatsappBadge) {
                setInterval(toggleBadgeVisibility, 5000);
            }

        });
    </script>
</body>

</html>